{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 334a7834641b8155c2e1","webpack:///./lib/sem-lib.js","webpack:///(webpack)/buildin/global.js","webpack:///./node_modules/js-sorted-set/src/SortedSet/AbstractSortedSet.coffee","webpack:///./node_modules/js-sorted-set/src/SortedSet/RedBlackTreeStrategy.coffee","webpack:///./node_modules/js-sorted-set/src/SortedSet/AbstractBinaryTreeStrategy.coffee","webpack:///./node_modules/js-sorted-set/src/SortedSet/BinaryTreeIterator.coffee"],"names":["AbstractSortedSet","require","RedBlackTreeStrategy","hasProp","Object","hasOwnProperty","inherits","child","parent","key","call","ctor","constructor","prototype","__super__","SortedSet","options","strategy","add","insert","get","value","priv","comparator","node","root","cmp","left","right","undefined","isNumeric","obj","Array","isArray","parseFloat","isObject","globalCounter","toPositiveInt","num","_default","parseInt","Semaphore","capacity","isFull","priority","Number","POSITIVE_INFINITY","_queue","priorityComparator","id","_capacity","_numTokens","setImmediateTick","global","setImmediate","fn","setTimeout","clearImmediateTick","clearImmediate","clearTimeout","getNumTokens","getCapacity","semGive","checkLimitAfter","destroyed","_semTake","semFlush","forEach","group","stack","item","semTake","settings","result","task","timeOut","onTimeOut","onTake","Function","semaphore","taken","cancel","_removeItem","setPriority","remove","length","_addItemPriority","timer","res","addCounter","_hasInWaitingTask","_destroyWaiting","_destroy","keepAlive","_keepAlive","beginIterator","timerID","_checkKeepAlive","destroy","safe","onDestroy","_destroying","__onDestroy","i","_len","schedule","collection","iteratee","done","semID","arguments","count","index","keys","len","items","doneCalled","canceled","errors","hasError","called","next","err","Error","code","icancel","iterate","bind","proxy","defineProperty","configurable","enumerable","set","loop","_addGroup","isAlive","Boolean","hasInWaitingTask","_this","property","idComparator","a","b","exports","semCreate","create","apply","g","eval","e","window","module"],"mappings":"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","file":"sem-lib.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"semLib\"] = factory();\n\telse\n\t\troot[\"semLib\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 334a7834641b8155c2e1","const AbstractSortedSet = require(\"js-sorted-set/src/SortedSet/AbstractSortedSet\");\nconst RedBlackTreeStrategy = require(\"js-sorted-set/src/SortedSet/RedBlackTreeStrategy\");\n\nconst hasProp = Object.hasOwnProperty;\n\nconst inherits = function(child, parent) {\n    for (var key in parent) {\n        if (hasProp.call(parent, key)) {\n            child[key] = parent[key];\n        }\n    }\n\n    function ctor() {\n        // eslint-disable-next-line no-invalid-this\n        this.constructor = child;\n    }\n    ctor.prototype = parent.prototype;\n    child.prototype = new ctor();\n    child.__super__ = parent.prototype; return child;\n};\n\nfunction SortedSet(options) {\n    if (options == null) {\n        options = {};\n    }\n    if (!options.strategy) {\n        options.strategy = RedBlackTreeStrategy;\n    }\n    SortedSet.__super__.constructor.call(this, options);\n}\n\ninherits(SortedSet, AbstractSortedSet);\n\nSortedSet.prototype.add = SortedSet.prototype.insert;\n\nSortedSet.prototype.get = function(value) {\n    // Use our optimzed get on RedBlackTreeStrategy\n    return this.priv.get(value);\n};\n\n// Optimization: take the first match.\nRedBlackTreeStrategy.prototype.get = function(value) {\n    const comparator = this.comparator;\n    let node = this.root;\n    let cmp;\n\n    while (node !== null) {\n        cmp = comparator(value, node.value);\n        if (cmp === 0) {\n            break;\n        } else if (cmp < 0) {\n            node = node.left;\n        } else {\n            node = node.right;\n        }\n    }\n\n    return node === null ? undefined : node.value;\n};\n\nconst isNumeric = function(obj) {\n    return !Array.isArray(obj) && obj - parseFloat(obj) + 1 >= 0;\n};\n\nconst isObject = function(obj) {\n    return typeof obj === \"object\" && obj !== null;\n};\n\n// Debugging purpose\nlet globalCounter = 0;\n\n/**\n * Value of parsed interger or default value if not a number or < 0\n * @param  {Any} num value to parse\n * @param  {Interger} _default default value\n * @return {Interger} parsing result\n */\nfunction toPositiveInt(num, _default) {\n    if (isNumeric(num)) {\n        num = parseInt(num, 10);\n    } else {\n        return _default;\n    }\n    if (num < 0) {\n        return _default;\n    }\n\n    return num;\n}\n\n/**\n * @constructor\n *\n * @param {Integer} capacity (default = 1) Number of tokens that can be handled by the Semaphore\n * @param {Boolean} isFull (default = false) if true object is created with tokens\n * @param {Integer} priority (default = 15) default priority\n */\nfunction Semaphore(capacity, isFull, priority) {\n    if (isNumeric(capacity)) {\n        capacity = parseInt(capacity, 10);\n        if (capacity <= 0) {\n            capacity = Number.POSITIVE_INFINITY;\n        }\n    } else if (capacity !== Number.POSITIVE_INFINITY) {\n        capacity = 1;\n    } else {\n        isFull = false;\n    }\n\n    var _queue = new SortedSet({\n        comparator: priorityComparator\n    });\n\n    this.id = ++globalCounter;\n    this._capacity = capacity;\n    this._queue = _queue;\n    this._numTokens = isFull ? capacity : 0;\n    // eslint-disable-next-line no-magic-numbers\n    this.priority = isNumeric(priority) ? parseInt(priority, 10) : 15;\n}\n\nSemaphore.prototype.setImmediateTick = (function() {\n    if (typeof global === \"object\" && typeof global.setImmediate === \"function\") {\n        return global.setImmediate;\n    }\n\n    return function(fn) {\n        return setTimeout(fn, 1);\n    };\n})();\n\nSemaphore.prototype.clearImmediateTick = (function() {\n    if (typeof global === \"object\" && typeof global.clearImmediate === \"function\") {\n        return global.clearImmediate;\n    }\n\n    return function(id) {\n        clearTimeout(id);\n    };\n})();\n\n/**\n * Return number of available tokens\n * @return {Interger} number of available tokens\n */\nSemaphore.prototype.getNumTokens = function getNumTokens() {\n    return this._numTokens;\n};\n\n/**\n * Return maximum of available tokens\n * @return {Integer} maximum of available tokens\n */\nSemaphore.prototype.getCapacity = function getCapacity() {\n    return this._capacity;\n};\n\n/**\n * Add tokens to the Semaphore\n *\n * @param {Interger} num Number of tokens to add\n */\nSemaphore.prototype.semGive = function semGive(num, checkLimitAfter) {\n    if (this.destroyed) {\n        return false;\n    }\n\n    if (num !== Number.POSITIVE_INFINITY) {\n        num = toPositiveInt(num, 1);\n        if (num < 1) {\n            num = 1;\n        }\n        this._numTokens += num;\n    } else {\n        this._numTokens = num;\n    }\n\n    if (!checkLimitAfter && this._numTokens > this._capacity) {\n        this._numTokens = this._capacity;\n    }\n\n    this._semTake();\n\n    if (checkLimitAfter && this._numTokens > this._capacity) {\n        this._numTokens = this._capacity;\n    }\n\n    return true;\n};\n\n/**\n * Give tokens to every inwaiting tasks\n */\nSemaphore.prototype.semFlush = function semFlush() {\n    if (this.destroyed) {\n        return false;\n    }\n\n    this._numTokens = 0;\n    this._queue.forEach(function(group) {\n        group.stack.forEach(function(item) {\n            item.num = 0;\n        });\n    });\n    this._semTake();\n    return true;\n};\n\n/**\n * Wait for Semaphore availability before calling onTake callback\n * @example\n * semTake(Function[, takeInstance]);\n * semTake(Settings[, takeInstance]);\n *\n * @param {Object} settings settings with the following properties:\n * <ul>\n * <li>{Function} <b><em>onTake</em></b></li>: called on successful take\n * <li>{Integer} <b><em>num</em></b></li>(optional, default = 1): Number of tokens to take before calling onTake callback\n * <li>{Integer} <b><em>priority</em></b></li>(optional): task priority, smaller is higher priority\n * <li>{Number} <b><em>timeOut</em></b></li>(optional): milliseconds to wait before timeOut. If !(settings['timeOut'] > 0), waiting will last forever\n * <li>{Function} <b><em>onTimeOut</em></b></li>(optional): called if timeOut occurs\n * </ul>\n * @return {Object|false} item item.addCounter(n = 1) => wait for n more tokens\n */\nSemaphore.prototype.semTake = function semTake(settings, result) {\n    var task, timeOut, onTimeOut, num, priority;\n\n    if (this.destroyed) {\n        return false;\n    }\n\n    if (isObject(settings)) {\n        task = settings.onTake;\n        priority = settings.priority;\n        num = settings.num;\n        timeOut = settings.timeOut;\n        onTimeOut = settings.onTimeOut;\n    } else if (typeof settings === \"function\") {\n        task = settings;\n        settings = {};\n    }\n\n    if (typeof task !== \"function\") {\n        task = Function.prototype;\n    }\n\n    num = toPositiveInt(num, 1);\n    priority = toPositiveInt(priority, this.priority);\n\n    const item = {\n        id: ++globalCounter,\n        task: task,\n        priority: priority,\n        num: num,\n        onTimeOut: onTimeOut,\n        semaphore: this,\n        taken: 0,\n        cancel: () => {\n            const taken = item.taken;\n            this._removeItem(item);\n\n            if (taken !== 0) {\n                // give on next tick to wait for all synchronous canceled to be done\n                this.setImmediateTick(() => {\n                    this.semGive(taken, true);\n                });\n            }\n        },\n        setPriority: (priority) => {\n            priority = toPositiveInt(priority, this.priority);\n            if (priority === item.priority) {\n                return;\n            }\n\n            item.group.stack.remove(item);\n            if (item.group.stack.length === 0) {\n                // No more inWaiting for this priority group\n                item.semaphore._queue.remove(item.group);\n            }\n\n            item.priority = priority;\n            this._addItemPriority(item);\n        }\n    };\n\n    this._addItemPriority(item);\n\n    if (isNumeric(timeOut) && timeOut > 0) {\n        item.timer = setTimeout(() => {\n            const taken = item.taken;\n            this._removeItem(item);\n\n            if (taken !== 0) {\n                // give on next tick to wait for all synchronous canceled to be done\n                this.setImmediateTick(() => {\n                    this.semGive(taken, true);\n                });\n            }\n\n            if (typeof onTimeOut === \"function\") {\n                onTimeOut();\n            }\n        }, timeOut);\n    }\n\n    const res = {\n        addCounter(num) {\n            item.num += toPositiveInt(num, 1);\n        },\n\n        cancel() {\n            item.cancel();\n        },\n\n        setPriority(priority) {\n            item.setPriority(priority);\n        }\n    };\n\n    if (isObject(result)) {\n        result.addCounter = res.addCounter;\n        result.cancel = res.cancel;\n        result.setPriority = res.setPriority;\n    }\n\n    this._semTake();\n    return res;\n};\n\n/**\n * Take tokens if available\n *\n */\nSemaphore.prototype._semTake = function _semTake() {\n    if (!this._hasInWaitingTask()) {\n        if (this._destroyWaiting) {\n            this._destroy();\n        }\n        return;\n    }\n\n    if (typeof this.keepAlive === \"undefined\") {\n        this._keepAlive();\n    }\n\n    var group = this._queue.beginIterator().value();\n    var item = group.stack.beginIterator().value();\n\n    // if item is still waiting for tokens, try again at next give or flush\n    if (item.num > this._numTokens) {\n        item.taken += this._numTokens;\n        item.num -= this._numTokens;\n        this._numTokens = 0;\n        return;\n    }\n\n    item.taken += item.num;\n    if (this._numTokens !== Number.POSITIVE_INFINITY) {\n        this._numTokens -= item.num;\n    }\n    item.num = 0;\n\n    const task = item.task;\n    const taken = item.taken;\n    this._removeItem(item);\n\n    // Non blocking call of callback\n    // A way to loop through in waiting tasks without blocking\n    // semaphore the process until done\n    let timerID = this.setImmediateTick(() => {\n        item.cancel = Function.prototype;\n        task();\n    });\n    item.cancel = () => {\n        if (timerID) {\n            this.clearImmediateTick(timerID);\n            timerID = null;\n\n            // give on next tick to wait for all synchronous canceled to be done\n            this.setImmediateTick(() => {\n                this.semGive(taken, true);\n            });\n        }\n    };\n\n    if (this._checkKeepAlive(this._destroyWaiting)) {\n        this._semTake();\n    }\n};\n\n/**\n * Destroy all inwaiting tasks\n * @param  {Boolean} safe if true, wait for all inwaiting tasks to be performed, else, destroy with no warn\n */\nSemaphore.prototype.destroy = function(safe, onDestroy) {\n    if (this._destroying) {\n        return false;\n    }\n\n    this._destroying = true;\n    this.__onDestroy = onDestroy;\n\n    if (safe !== false) {\n        this._destroyWaiting = true;\n        this._semTake();\n        return true;\n    }\n\n    return this._destroy(safe);\n};\n\nSemaphore.prototype._destroy = function(safe) {\n    this._destroyWaiting = false;\n\n    // for loop to avoid infinite loop with while\n    for (var i = 0, _len = this._queue.length; i < _len; i++) {\n        var group = this._queue.beginIterator().value();\n        var item = group.stack.beginIterator().value();\n\n        if (safe !== false) {\n            item.cancel();\n        }\n        this._removeItem(item);\n    }\n\n    if (this._checkKeepAlive()) {\n        return false;\n    }\n\n    var __onDestroy = this.__onDestroy;\n\n    this.destroyed = true;\n    if (\"function\" === typeof __onDestroy) {\n        __onDestroy();\n    }\n    return true;\n};\n\nSemaphore.prototype.schedule = function(collection, priority, iteratee, done) {\n    const semID = this;\n\n    switch(arguments.length) {\n        case 2:\n            if (typeof priority === \"function\") {\n                done = priority;\n                priority = null;\n            }\n            break;\n        case 3:\n            done = iteratee;\n            iteratee = null;\n\n            if (\"function\" === typeof priority) {\n                iteratee = priority;\n                priority = null;\n            }\n            break;\n        default:\n            // Nothing to do\n    }\n\n    if (done == null) {\n        done = Function.prototype;\n    }\n\n    let count = 0;\n    let index = -1;\n    const isArray = Array.isArray(collection);\n    const keys = isArray ? null : Object.keys(collection);\n    const len = isArray ? collection.length : keys.length;\n\n    if (len === 0) {\n        done();\n        return null;\n    }\n\n    const items = new Array(len);\n    let doneCalled = false;\n    let canceled = false;\n    let taken = 0;\n    const errors = new Array(len);\n    let hasError = false;\n\n    const onTake = (collection, index) => {\n        taken++;\n        items[index] = null;\n        const key = isArray ? index : keys[index];\n\n        let called = false;\n        const next = (err) => {\n            if (called) {\n                throw new Error(\"callback already called\");\n            }\n            called = true;\n            items[index] = null;\n\n            semID.semGive();\n            taken--;\n\n            if (doneCalled) {\n                return;\n            }\n\n            if (canceled && !err) {\n                err = new Error(\"canceled\");\n                err.code = \"CANCELED\";\n            }\n\n            if (err) {\n                if (!hasError) {\n                    hasError = true;\n                    if (!canceled) {\n                        cancel();\n                    }\n                }\n                errors[index] = err;\n            }\n\n            if (++count === len || hasError && taken === 0) {\n                doneCalled = true;\n                if (canceled) {\n                    errors.code = \"CANCELED\";\n                }\n                done(hasError ? errors : null);\n            }\n        };\n\n        if (canceled) {\n            next();\n            return;\n        }\n\n        const icancel = typeof iteratee === \"function\" ? iteratee(collection[key], key, next) : collection[key](next);\n\n        if (typeof icancel === \"function\") {\n            items[index] = {\n                cancel: icancel\n            };\n        } else if (icancel !== null && typeof icancel === \"object\" && typeof icancel.cancel === \"function\") {\n            items[index] = icancel;\n        }\n    };\n\n    const iterate = (index) => {\n        const item = semID.semTake({\n            priority,\n            onTake: onTake.bind(null, collection, index)\n        });\n\n        const proxy = {\n            cancel: () => {\n                item.cancel();\n                onTake(collection, index);\n            }\n        };\n\n        for (const key in item) {\n            if (key === \"cancel\") {\n                continue;\n            }\n\n            Object.defineProperty(proxy, key, {\n                configurable: true,\n                enumerable: true,\n                get() {\n                    return item[key];\n                },\n                set(value) {\n                    return item[key] = value;\n                }\n            });\n        }\n\n        return proxy;\n    };\n\n    const loop = () => {\n        do {\n            ++index;\n            items[index] = iterate(index);\n        } while (index !== len - 1);\n    };\n\n    function cancel() {\n        if (canceled) {\n            return;\n        }\n\n        canceled = true;\n        for (let i = 0, len = items.length; i < len; i++) {\n            if (items[i] !== null && typeof items[i] === \"object\" && typeof items[i].cancel === \"function\") {\n                items[i].cancel();\n                items[i] = null;\n            }\n        }\n    }\n\n    const setPriority = (priority) => {\n        for (let i = 0, len = items.length; i < len; i++) {\n            if (items[i] !== null && typeof items[i] === \"object\" && typeof items[i].setPriority === \"function\") {\n                items[i].setPriority(priority);\n            }\n        }\n    };\n\n    loop();\n\n    return {\n        setPriority,\n        cancel\n    };\n};\n\nSemaphore.prototype._addItemPriority = function(item) {\n    let group = this._queue.get({\n        priority: item.priority\n    });\n    if (!group) {\n        group = this._addGroup(item);\n    }\n    group.stack.add(item);\n    item.group = group;\n};\n\nSemaphore.prototype._checkKeepAlive = function _checkKeepAlive(_destroyWaiting) {\n    if (this._hasInWaitingTask()) {\n        return true;\n    }\n\n    clearTimeout(this.keepAlive);\n    delete this.keepAlive;\n    if (_destroyWaiting) {\n        this._destroy();\n    }\n    return false;\n};\n\nSemaphore.prototype.isAlive = function isAlive() {\n    return Boolean(this.keepAlive);\n};\n\nSemaphore.prototype.hasInWaitingTask = function hasInWaitingTask() {\n    return hasProp.call(this, \"_queue\") && this._hasInWaitingTask();\n};\n\nSemaphore.prototype._hasInWaitingTask = function _hasInWaitingTask() {\n    return this._queue.length !== 0;\n};\n\nSemaphore.prototype._keepAlive = function _keepAlive() {\n    if (!this._hasInWaitingTask()) {\n        return;\n    }\n    var _this = this;\n    this.keepAlive = setTimeout(function() {\n        _this._keepAlive();\n    }, 1000);\n};\n\n/**\n * Remove item from a priority group\n *\n */\nSemaphore.prototype._removeItem = function _removeItem(item) {\n    if (item.timer) {\n        clearTimeout(item.timer);\n    }\n\n    item.group.stack.remove(item);\n    if (item.group.stack.length === 0) {\n        // No more inWaiting for this priority group\n        item.semaphore._queue.remove(item.group);\n\n        item.semaphore._checkKeepAlive();\n    }\n\n    // Remove properties to allow garbage collector\n    // eslint-disable-next-line guard-for-in\n    for (var property in item) {\n        if (property !== \"id\") {\n            delete item[property];\n        }\n    }\n};\n\nSemaphore.prototype._addGroup = function _addGroup(item) {\n\n    const stack = new SortedSet({\n        comparator: idComparator\n    });\n\n    const group = {\n        priority: item.priority,\n        stack: stack\n    };\n    item.semaphore._queue.add(group);\n    return group;\n};\n\nfunction idComparator(a, b) {\n    return a.id > b.id ? 1 : a.id < b.id ? -1 : 0;\n}\n\nfunction priorityComparator(a, b) {\n    return a.priority > b.priority ? 1 : a.priority < b.priority ? -1 : 0;\n}\n\nexports.semCreate = function() {\n    const semID = Object.create(Semaphore.prototype);\n    Semaphore.apply(semID, arguments);\n    return semID;\n};\n\n// Allow customization/Patch fix from outside\nexports.Semaphore = Semaphore;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/sem-lib.js","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n// WEBPACK FOOTER //\n// (webpack)/buildin/global.js","module.exports = class AbstractSortedSet\n  constructor: (options) ->\n    throw 'Must pass options.strategy, a strategy' if !options?.strategy?\n    throw 'Must pass options.comparator, a comparator' if !options?.comparator?\n    @priv = new options.strategy(options)\n    @length = 0\n\n  insert: (value) ->\n    @priv.insert(value)\n    @length += 1\n    this\n\n  remove: (value) ->\n    @priv.remove(value)\n    @length -= 1\n    this\n\n  contains: (value) ->\n    @priv.contains(value)\n\n  # Returns this set as an Array\n  toArray: -> @priv.toArray()\n\n  forEach: (callback, thisArg) ->\n    @priv.forEachImpl(callback, this, thisArg)\n    this\n\n  map: (callback, thisArg) ->\n    ret = []\n    @forEach (value, index, self) ->\n      ret.push(callback.call(thisArg, value, index, self))\n    ret\n\n  filter: (callback, thisArg) ->\n    ret = []\n    @forEach (value, index, self) ->\n      ret.push(value) if callback.call(thisArg, value, index, self)\n    ret\n\n  every: (callback, thisArg) ->\n    ret = true\n    @forEach (value, index, self) ->\n      ret = false if ret && !callback.call(thisArg, value, index, self)\n    ret\n\n  some: (callback, thisArg) ->\n    ret = false\n    @forEach (value, index, self) ->\n      ret = true if !ret && callback.call(thisArg, value, index, self)\n    ret\n\n  # An iterator is similar to a C++ iterator: it points _before_ a value.\n  #\n  # So in this sorted set:\n  #\n  #   | 1 | 2 | 3 | 4 | 5 |\n  #   ^a      ^b          ^c\n  #\n  # `a` is a pointer to the beginning of the iterator. `a.value()` returns\n  # `3`. `a.previous()` returns `null`. `a.setValue()` works, if\n  # `options.allowSetValue` is true.\n  # \n  # `b` is a pointer to the value `3`. `a.previous()` and `a.next()` both do\n  # the obvious.\n  #\n  # `c` is a pointer to the `null` value. `c.previous()` works; `c.next()`\n  # returns null. `c.setValue()` throws an exception, even if\n  # `options.allowSetValue` is true.\n  #\n  # Iterators have `hasNext()` and `hasPrevious()` methods, too.\n  #\n  # Iterators are immutible. `iterator.next()` returns a new iterator.\n  #\n  # Iterators become invalid as soon as `insert()` or `remove()` is called.\n  findIterator: (value) ->\n    @priv.findIterator(value)\n\n  # Finds an iterator pointing to the lowest possible value.\n  beginIterator: ->\n    @priv.beginIterator()\n\n  # Finds an iterator pointing to the `null` value.\n  endIterator: ->\n    @priv.endIterator()\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/js-sorted-set/src/SortedSet/AbstractSortedSet.coffee","AbstractBinaryTreeStrategy = require('./AbstractBinaryTreeStrategy')\n\n# An implementation of Left-Leaning Red-Black trees.\n#\n# It's copied from http://www.cs.princeton.edu/~rs/talks/LLRB/LLRB.pdf.\n# It's practically a copy-paste job, minus the semicolons. missing bits were\n# filled in with hints from\n# http://www.teachsolaisgames.com/articles/balanced_left_leaning.html\n#\n# Here are some differences:\n# * This isn't a map structure: it's just a tree. There are no keys: the\n#   comparator applies to the values.\n# * We use the passed comparator.\n\nclass Node\n  constructor: (@value) ->\n    @left = null\n    @right = null\n    @isRed = true # null nodes -- leaves -- are black\n\nrotateLeft = (h) ->\n  x = h.right\n  h.right = x.left\n  x.left = h\n  x.isRed = h.isRed\n  h.isRed = true\n  x\n\nrotateRight = (h) ->\n  x = h.left\n  h.left = x.right\n  x.right = h\n  x.isRed = h.isRed\n  h.isRed = true\n  x\n\ncolorFlip = (h) ->\n  h.isRed = !h.isRed\n  h.left.isRed = !h.left.isRed\n  h.right.isRed = !h.right.isRed\n  undefined\n\nmoveRedLeft = (h) ->\n  #throw 'Preconditions failed' if !(!h.left.isRed && !h.left.left?.isRed)\n  colorFlip(h)\n  if h.right isnt null && h.right.left isnt null && h.right.left.isRed\n    h.right = rotateRight(h.right)\n    h = rotateLeft(h)\n    colorFlip(h)\n  h\n\nmoveRedRight = (h) ->\n  #throw 'Preconditions failed' if !(!h.right.isRed && !h.right.left?.isRed)\n  colorFlip(h)\n  if h.left isnt null && h.left.left isnt null && h.left.left.isRed\n    h = rotateRight(h)\n    colorFlip(h)\n  h\n\ninsertInNode = (h, value, compare) ->\n  if h is null\n    return new Node(value)\n\n  #if h.left isnt null && h.left.isRed && h.right isnt null && h.right.isRed\n  #  colorFlip(h)\n\n  if h.value is value\n    throw 'Value already in set'\n  else\n    if compare(value, h.value) < 0\n      h.left = insertInNode(h.left, value, compare)\n    else\n      h.right = insertInNode(h.right, value, compare)\n\n  if h.right isnt null && h.right.isRed && !(h.left isnt null && h.left.isRed)\n    h = rotateLeft(h)\n\n  if h.left isnt null && h.left.isRed && h.left.left isnt null && h.left.left.isRed\n    h = rotateRight(h)\n\n  # Put this here -- I couldn't get the whole thing to work otherwise :(\n  if h.left isnt null && h.left.isRed && h.right isnt null && h.right.isRed\n    colorFlip(h)\n\n  h\n\nfindMinNode = (h) ->\n  while h.left isnt null\n    h = h.left\n  h\n\nfixUp = (h) ->\n  # Fix right-leaning red nodes\n  if h.right isnt null && h.right.isRed\n    h = rotateLeft(h)\n\n  # Handle a 4-node that traverses down the left\n  if h.left isnt null && h.left.isRed && h.left.left isnt null && h.left.left.isRed\n    h = rotateRight(h)\n\n  # split 4-nodes\n  if h.left isnt null && h.left.isRed && h.right isnt null && h.right.isRed\n    colorFlip(h)\n\n  h\n\nremoveMinNode = (h) ->\n  if h.left is null\n    return null\n\n  if !h.left.isRed && !(h.left.left isnt null && h.left.left.isRed)\n    h = moveRedLeft(h)\n\n  h.left = removeMinNode(h.left)\n\n  fixUp(h)\n\nremoveFromNode = (h, value, compare) ->\n  throw 'Value not in set' if h is null\n\n  if h.value isnt value && compare(value, h.value) < 0\n    throw 'Value not in set' if h.left is null\n    if !h.left.isRed && !(h.left.left isnt null && h.left.left.isRed)\n      h = moveRedLeft(h)\n    h.left = removeFromNode(h.left, value, compare)\n  else\n    if h.left isnt null && h.left.isRed\n      h = rotateRight(h)\n\n    if h.right is null\n      if value is h.value\n        return null # leaf node; LLRB assures no left value here\n      else\n        throw 'Value not in set'\n\n    if !h.right.isRed && !(h.right.left isnt null && h.right.left.isRed)\n      h = moveRedRight(h)\n    if value is h.value\n      h.value = findMinNode(h.right).value\n      h.right = removeMinNode(h.right)\n    else\n      h.right = removeFromNode(h.right, value, compare)\n\n  h = fixUp(h) if h isnt null\n\n  h\n\nmodule.exports = class RedBlackTreeStrategy extends AbstractBinaryTreeStrategy\n  constructor: (@options) ->\n    @comparator = @options.comparator\n    @root = null\n\n  insert: (value) ->\n    @root = insertInNode(@root, value, @comparator)\n    @root.isRed = false # always\n    undefined\n\n  remove: (value) ->\n    @root = removeFromNode(@root, value, @comparator)\n    @root.isRed = false if @root isnt null\n    undefined\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/js-sorted-set/src/SortedSet/RedBlackTreeStrategy.coffee","BinaryTreeIterator = require('./BinaryTreeIterator')\n\nbinaryTreeTraverse = (node, callback) ->\n  if node isnt null\n    binaryTreeTraverse(node.left, callback)\n    callback(node.value)\n    binaryTreeTraverse(node.right, callback)\n  undefined\n\n# An AbstractBinaryTree has a @root. @root is null or an object with\n# `.left`, `.right` and `.value` properties.\nclass AbstractBinaryTree\n  toArray: ->\n    ret = []\n    binaryTreeTraverse(@root, (value) -> ret.push(value))\n    ret\n\n  forEachImpl: (callback, sortedSet, thisArg) ->\n    i = 0\n    binaryTreeTraverse @root, (value) ->\n      callback.call(thisArg, value, i, sortedSet)\n      i += 1\n    undefined\n\n  contains: (value) ->\n    comparator = @comparator\n\n    node = @root\n    while node isnt null\n      cmp = comparator(value, node.value)\n      if cmp == 0\n        break\n      else if cmp < 0\n        node = node.left\n      else\n        node = node.right\n\n    node isnt null && node.value == value\n\n  findIterator: (value) -> BinaryTreeIterator.find(this, value, @comparator)\n  beginIterator: -> BinaryTreeIterator.left(this)\n  endIterator: -> BinaryTreeIterator.right(this)\n\nmodule.exports = AbstractBinaryTree\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/js-sorted-set/src/SortedSet/AbstractBinaryTreeStrategy.coffee","descendAllTheWay = (leftOrRight, node) ->\n  # Assumes node._iteratorParentNode is set\n  while node[leftOrRight] isnt null\n    parent = node\n    node = node[leftOrRight]\n    node._iteratorParentNode = parent\n  node\n\nmoveCursor = (leftOrRight, node) ->\n  if node[leftOrRight] isnt null\n    parent = node\n    node = node[leftOrRight]\n    node._iteratorParentNode = parent\n    rightOrLeft = if leftOrRight == 'left' then 'right' else 'left'\n    node = descendAllTheWay(rightOrLeft, node)\n  else\n    while (parent = node._iteratorParentNode) isnt null && parent[leftOrRight] is node\n      node = parent\n    node = parent # either null or the correct-direction parent\n\n  node\n\n# The BinaryTreeIterator actually writes to the tree: it maintains a\n# \"_iteratorParentNode\" variable on each node. Please ignore this.\nclass BinaryTreeIterator\n  constructor: (@tree, @node) ->\n\n  next: ->\n    if @node is null\n      null\n    else\n      node = moveCursor('right', @node)\n      new BinaryTreeIterator(@tree, node)\n\n  previous: ->\n    if @node is null\n      if @tree.root is null\n        null\n      else\n        @tree.root._iteratorParentNode = null\n        node = descendAllTheWay('right', @tree.root)\n        new BinaryTreeIterator(@tree, node)\n    else\n      node = moveCursor('left', @node)\n      if node is null\n        null\n      else\n        new BinaryTreeIterator(@tree, node)\n\n  hasNext: -> @node isnt null\n  hasPrevious: -> @previous() isnt null\n  value: -> if @node is null then null else @node.value\n  setValue: (value) ->\n    throw 'Must set options.allowSetValue' if !@tree.options.allowSetValue\n    throw 'Cannot set value at end of set' if !@hasNext()\n    @node.value = value\n\nBinaryTreeIterator.find = (tree, value, comparator) ->\n  root = tree.root\n  root?._iteratorParentNode = null\n  node = root\n  nextNode = null # For finding an in-between node\n  while node isnt null\n    cmp = comparator(value, node.value)\n    if cmp == 0\n      break\n    else if cmp < 0\n      break if node.left is null\n\n      nextNode = node # If we descend all right after this until there are\n                      # no more right nodes, we want to return an\n                      # \"in-between\" iterator ... pointing here.\n      node.left._iteratorParentNode = node\n      node = node.left\n    else\n      if node.right isnt null\n        node.right._iteratorParentNode = node\n        node = node.right\n      else\n        node = nextNode\n        break\n\n  return new BinaryTreeIterator(tree, node)\n\nBinaryTreeIterator.left = (tree) ->\n  if tree.root is null\n    new BinaryTreeIterator(tree, null)\n  else\n    tree.root._iteratorParentNode = null\n    node = descendAllTheWay('left', tree.root)\n    new BinaryTreeIterator(tree, node)\n\nBinaryTreeIterator.right = (tree) ->\n  new BinaryTreeIterator(tree, null)\n\nmodule.exports = BinaryTreeIterator\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/js-sorted-set/src/SortedSet/BinaryTreeIterator.coffee"],"sourceRoot":""}